docs/spec.md

PII Agent 관리 시스템 요구사항 (원문 + 구현 가이드)

0. 목적
	•	PM ↔ 개발 소통용 데모 웹페이지
	•	실제 백엔드 없이 Mock API로 동작
	•	데스크탑 전용, 한국어 UI

⸻

1. 권한/역할 모델

1.1 권한 단위
	•	권한은 서비스 코드(serviceCode) 단위
	•	서비스 코드에 권한이 있으면 해당 서비스의 모든 과제(Project)에 접근 가능
	•	권한은 조회/Action 통합(세분화 없음)

1.2 사용자 역할
	•	SERVICE_MANAGER
	•	본인 권한 서비스만 조회/액션
	•	ADMIN
	•	모든 서비스 조회 가능
	•	과제 등록/삭제
	•	권한 부여/회수
	•	승인/반려 처리

⸻

2. Cloud Provider

2.1 Provider 범위
	•	AWS: 리소스 스캔 가능
	•	IDC: 리소스 스캔 불가

2.2 AWS 리소스 예시
	•	RDS, Athena, DynamoDB 등

2.3 신규 리소스 정의
	•	ScanRole 기반 주기적 스캔
	•	“이전에 없던 리소스” = 신규

⸻

3. 설치 프로세스 (5단계)

3.1 프로세스 단계
	1.	연동 대상 확정 대기
	•	서비스 담당자: “PII Agent 연동 대상 확정”
	2.	승인 대기
	•	관리자: 승인 / 반려
	3.	설치 진행 중
	•	백그라운드 자동 처리(데모에서는 짧은 지연/수동 전이 가능)
	4.	연결 테스트 필요
	•	서비스 담당자: “Test Connection”
	5.	설치 완료

3.2 재설치(리셋)
	•	연결 끊김 또는 신규 리소스 발견 시
	•	서비스 담당자가 다시 “연동 대상 확정” 수행
	•	프로세스가 1단계로 리셋

⸻

4. 화면 요구사항

4.1 서비스 담당자 화면

페이지 1: 서비스 코드 + 과제 목록(통합, 2-pane)
	•	좌측: 서비스 코드 목록
	•	우측: 선택된 서비스의 과제 목록

표시 정보:
	•	과제 코드(projectCode)
	•	현재 프로세스 단계
	•	상태 아이콘/배지

페이지 2: 과제 상세

(1) 프로세스 현황
	•	5단계 Step Indicator
	•	현재 단계 강조
	•	단계별 안내 텍스트
	•	다음 액션 버튼

(2) 리소스 연결 상태 테이블
	•	리소스 타입 / 리소스 ID / 연결 상태 / 비고

(3) 액션 버튼
	•	스캔 재실행(AWS only)
	•	연동 대상 확정(1단계 또는 재설치)
	•	Test Connection(4단계)

(4) TF 설치 상태(읽기전용)
	•	서비스 측 TF
	•	BDC TF common
	•	BDC service level TF

⸻

4.2 관리자 화면

페이지 1: 서비스 코드 + 과제 목록
	•	서비스 담당자 화면과 동일한 레이아웃
	•	추가 버튼:
	•	과제 등록
	•	권한 관리

과제 등록 모달
	•	과제 코드 입력
	•	서비스 코드 선택
	•	Cloud Provider 선택(AWS/IDC)

권한 관리 모달
	•	서비스 코드 기준 권한 보유 사용자 목록
	•	사용자 추가/제거

페이지 2: 과제 상세
	•	서비스 담당자 상세와 동일
	•	추가: 2단계 “승인 대기”에서 승인/반려 버튼

⸻

5. 리소스 모델링 (UI 가독성 우선)

데모 페이지에서 “보기 좋게” 보여주는 게 최우선.

	•	Region 개념 필요(AWS만)
	•	AWS 리소스 타입을 구분:
	•	RDS
	•	RDS_CLUSTER
	•	DYNAMODB
	•	ATHENA
	•	REDSHIFT
	•	“스캔된 리소스” vs “연동 대상” 구분 필요
	•	단순화 방식: 상태/플래그로 구분

⸻

6. UI 텍스트(예시)
	•	1단계: “Cloud Provider를 선택하고 연결할 리소스를 확정하세요”
	•	2단계: “관리자 승인을 기다리는 중입니다”
	•	3단계: “PII Agent를 설치하고 있습니다”
	•	4단계: “설치가 완료되었습니다. DB 연결을 테스트하세요”
	•	5단계: “설치 및 연결이 완료되었습니다”

⸻

7. 일정 목표
	•	Day1: 서비스 담당자 핵심 화면 + 기본 액션
	•	Day2: 관리자 기능 + 승인/반려 + 권한관리 + 스캔 + TF 표시 + UI 정제
