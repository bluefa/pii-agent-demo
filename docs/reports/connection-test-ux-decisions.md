# ConnectionTestPanel UX 결정 이력

## 배경

PR #197에서 비동기 Connection Test UI를 구현하면서 사용자 피드백을 기반으로 여러 차례 UX 개선을 진행했습니다. 이 문서는 주요 결정 사항과 그 근거를 기록합니다.

---

## 결정 이력

### D1. CTA 수 축소 (10개 → 3개)

| 항목 | 내용 |
|------|------|
| 문제 | 초기 구현에서 CTA가 10개(버튼 4, 텍스트 링크 3, 모달 내 3)로 과다 |
| 결정 | 메인 패널 CTA를 3개로 축소: Primary 버튼 1개 + 텍스트 링크 2개 |
| 근거 | 사용자가 "버튼이 너무 많다"고 피드백. 핵심 액션 하나에 집중하는 구조로 전환 |
| 제안자 | 사용자 |

**변경 전 CTA 목록:**
1. 연결 테스트 실행 (primary)
2. 재실행 (primary)
3. 테스트 진행 중... (disabled)
4. 모든 연결 내역 확인하러 가기 (secondary button)
5. 확인하러 가기 (text link - LastSuccessBar)
6. 모든 리소스 확인하기 (text link - ResultCard)
7. 취소 (modal)
8. 설정 완료 후 테스트 실행 (modal)
9. 이력 카드 행 (modal clickable row)
10. 이전/다음 (modal pagination)

**변경 후 메인 패널 CTA:**
1. 연결 테스트 수행 (primary, 상태 무관 동일 텍스트)
2. 상세 보기 → (text link, 결과 요약 옆)
3. 모든 연결 내역 확인하러 가기 → (text link)

---

### D2. LastSuccessBar 제거

| 항목 | 내용 |
|------|------|
| 문제 | "마지막 성공 결과"를 가로로 넓게 표시하는 바가 "학부생이 만든 느낌" |
| 결정 | LastSuccessBar 컴포넌트 완전 제거. 결과는 최신 테스트 기준으로만 표시 |
| 대안 | A) 바를 축소하여 유지 → 여전히 CTA 증가 문제. B) 완전 제거 → 채택 |
| 근거 | 최신 결과만 보여주면 충분. 이전 성공 이력은 "모든 연결 내역" 모달에서 접근 가능 |
| 제안자 | 사용자 |

---

### D3. 결과 표시 방식: 아코디언 → 한 줄 요약 + 모달

| 항목 | 내용 |
|------|------|
| 문제 | ResultCard가 아코디언으로 펼쳐지며 리소스 목록을 inline 표시 → 화면이 길어짐 |
| 검토 옵션 | A) 성공만 모달, 실패는 inline B) 성공/실패 모두 모달 C) 항상 아코디언 |
| 결정 | **B) 성공/실패 관계없이 항상 "상세 보기 →" 텍스트 링크 → 모달** |
| 근거 | 사용자: "성공/실패 상관없이 상세보기로 통일". 메인 뷰를 단순하게 유지 |
| 제안자 | 사용자 |

**요약 형식:** `✓ 5개 성공 · 2/18 14:30` 또는 `⚠ 3개 성공, 2개 실패 · 2/18 14:30` + `상세 보기 →`

---

### D4. 버튼 텍스트 통일

| 항목 | 내용 |
|------|------|
| 문제 | 상태에 따라 "연결 테스트 실행" / "재실행"으로 텍스트가 변경 → 혼란 |
| 결정 | 상태 무관하게 항상 **"연결 테스트 수행"** (PENDING 시 "테스트 진행 중..." + disabled) |
| 근거 | 동일 기능인데 텍스트가 달라지면 다른 기능으로 오해할 수 있음 |
| 제안자 | 사용자 |

---

### D5. 가이드 영역: ProcessGuideStepCard 재활용

| 항목 | 내용 |
|------|------|
| 문제 | ConnectionTestPanel 내부에 하드코딩된 설명 영역이 프로세스 가이드와 스타일 불일치 |
| 결정 | 기존 `ProcessGuideStepCard` 컴포넌트를 step 4 데이터로 재활용, 항상 펼침 |
| 대안 | A) 요약만 표시 → 정보 부족. B) 전문 표시 + ProcessGuideStepCard 재활용 → 채택 |
| 근거 | 사용자: "무조건 재활용하자. 무조건." — 기존 가이드 페이지와 동일한 경험 제공 |
| 제안자 | 사용자 |

---

### D6. 텍스트 링크 스타일: secondary 색상 + 밑줄

| 항목 | 내용 |
|------|------|
| 문제 | 텍스트 링크를 primary(파란색)로 표시하면 CTA 과다 느낌 |
| 결정 | `text-gray-700 hover:text-gray-900 underline underline-offset-2` 패턴 |
| 근거 | secondary 색상 + 밑줄은 보조 네비게이션의 일반적인 패턴. Primary CTA와 시각 계층 분리 |
| 제안자 | 사용자 |

---

### D7. ProgressBar 단순화

| 항목 | 내용 |
|------|------|
| 문제 | 진행 중에 리소스별 미리보기(resource_id + SUCCESS/FAIL)까지 표시 → 과도한 정보 |
| 결정 | 프로그레스 바 + 완료 카운트만 표시. 리소스별 미리보기 제거 |
| 근거 | 진행 중에는 "얼마나 남았는지"만 중요. 상세 결과는 완료 후 모달에서 확인 |
| 제안자 | AI 추천 → 사용자 승인 |

---

### D8. Credential 모달: ResourceRow 테이블 패턴 적용

| 항목 | 내용 |
|------|------|
| 문제 | 초기 Credential 모달이 기존 Modal/ResourceRow 스타일과 크게 달라 이질감 |
| 결정 | 테이블 레이아웃 + per-row 상태 표시("선택 완료" / "미선택") 패턴으로 변경 |
| 근거 | 사용자: "기존 Resource Info처럼 보여졌으면 합니다. 기존 경험과 너무 다르니 다루기 어렵다" |
| 제안자 | 사용자 |

---

## 최종 UI 구조 (4개 시나리오)

### IDLE (이력 없음)
```
┌─ ProcessGuideStepCard (step 4, 항상 펼침) ──┐
│ 4. 연결 테스트 [진행중]                       │
│ 설치가 완료되었습니다. DB 연결을 테스트하세요.  │
│ ▶ 수행 절차: 1. 버튼 클릭 2. 결과 확인 ...   │
│ ⚠ 주의: DB Credential 미설정 리소스 ...       │
└─────────────────────────────────────────────┘
┌─ 액션 영역 ──────────────────────────────────┐
│ [연결 테스트 수행]                             │
└─────────────────────────────────────────────┘
```

### PENDING (진행 중)
```
┌─ ProcessGuideStepCard ──────────────────────┐
│ (위와 동일)                                   │
└─────────────────────────────────────────────┘
┌─ 액션 영역 ──────────────────────────────────┐
│ [⟳ 테스트 진행 중...] (disabled)              │
│                                               │
│ ⟳ 연결 테스트 진행 중...    2/5 리소스 완료    │
│ ████████░░░░░░░░░░░ 40%                      │
└─────────────────────────────────────────────┘
```

### SUCCESS (전체 성공)
```
┌─ ProcessGuideStepCard ──────────────────────┐
│ (위와 동일)                                   │
└─────────────────────────────────────────────┘
┌─ 액션 영역 ──────────────────────────────────┐
│ [연결 테스트 수행]                             │
│                                               │
│ 최근 테스트 결과                               │
│ ┌ ✓ 5개 성공 · 2/18 14:30   상세 보기 → ─┐  │
│ └─────────────────────────────────────────┘  │
│                                               │
│ 모든 연결 내역 확인하러 가기 →                  │
└─────────────────────────────────────────────┘
```

### FAIL (일부 실패)
```
┌─ ProcessGuideStepCard ──────────────────────┐
│ (위와 동일)                                   │
└─────────────────────────────────────────────┘
┌─ 액션 영역 ──────────────────────────────────┐
│ [연결 테스트 수행]                             │
│                                               │
│ 최근 테스트 결과                               │
│ ┌ ⚠ 3개 성공, 2개 실패 · 2/18 14:30        ┐│
│ │                          상세 보기 →      ││
│ └───────────────────────────────────────────┘│
│                                               │
│ 모든 연결 내역 확인하러 가기 →                  │
└─────────────────────────────────────────────┘
```

---

## 설계 원칙 (이 과정에서 확립)

| 원칙 | 적용 |
|------|------|
| **CTA 최소화** | 화면당 Primary 1개, 보조는 텍스트 링크로 시각 계층 분리 |
| **기존 컴포넌트 재활용** | ProcessGuideStepCard, Modal, ResourceRow 패턴 활용 |
| **상세 정보는 모달로** | 메인 뷰는 요약만, 상세는 사용자가 원할 때 모달로 접근 |
| **일관된 텍스트** | 동일 기능은 상태 무관 동일 텍스트 (e.g., "연결 테스트 수행") |
| **Secondary = gray + underline** | 보조 링크는 primary 파란색이 아닌 gray-700 + 밑줄 패턴 |
