# Cloud 리소스 + 스캔 UX 개선 설계

## 1. 현재 UX 문제점

| # | 문제 | 설명 |
|---|------|------|
| 1 | 스캔↔리소스 단절 | 스캔 결과와 리소스 테이블이 별개 섹션. 신규 발견 리소스가 어디 있는지 즉시 파악 불가 |
| 2 | 상태 한눈에 안 보임 | 연결/끊김/대기 비율을 파악하려면 테이블 전체를 스크롤해야 함 |
| 3 | 리소스 타입 구분 약함 | ResourceTypeGroup 헤더가 시각적으로 약해 타입별 비율 인지 어려움 |
| 4 | 스캔 이력 접근성 | 이력 보기가 토글 버튼으로 숨겨져 있어 트렌드 파악 불편 |
| 5 | 필터가 2탭만 | 연동 대상/전체 외에 상태, 타입별, 신규 등 필터 부재 |
| 6 | 체크박스 혼란 | 연동 대상 리소스 옆 체크박스가 항상 표시되어 사용자에게 혼란 |

## 2. 정보 우선순위

| 우선순위 | 정보 | 이유 |
|----------|------|------|
| **Primary** | 연동 대상 리소스 상태 (연결/끊김/Credential) | 관리자가 가장 자주 확인하는 정보 |
| **Secondary** | 스캔 요약 (마지막 결과, 상태) | 필요 시 확인, 항상 전면에 배치할 필요 없음 |
| **Tertiary** | 스캔 상세 (이력, 타입 분포), 비연동 리소스 | 필요할 때만 펼쳐서 확인 |

## 3. 설계 원칙

### 3.1 Progressive Disclosure (점진적 공개)
- 핵심 정보만 기본 노출, 상세 정보는 사용자가 원할 때 펼침
- 스캔 정보: 접이식 패널 (접힘=요약, 펼침=전체)
- 비연동 리소스: 하단 확장 영역
- 타입별 리소스 5개 초과 시: 더보기로 접기

### 3.2 Context-Aware Summary
- 스캔 중일 때: 진행 상태가 최우선 (배경색 변경 + 진행 바)
- 평상시: 마지막 스캔 결과 요약 + 스캔 시작 버튼

### 3.3 Mode Separation
- 기본: 모니터링 모드 (읽기 전용, 체크박스 없음)
- "대상 수정" 클릭 시: 편집 모드 (체크박스 표시)

## 4. 페이지 구조

```
프로젝트 상세 페이지
├─ ProjectHeader (Breadcrumb + 제목)
├─ ProcessStepsBar (6단계 진행 상태)
├─ ProjectInfoCard (프로젝트 기본 정보)
│
├─ ★ Cloud 리소스 (통합 컨테이너)
│   ├─ 스캔 접이식 패널
│   │   ├─ [접힘] Summary: 상태뱃지 + 마지막스캔결과 + 스캔버튼
│   │   └─ [펼침] 결과 메트릭 + 타입 분포 + 스캔 이력
│   │
│   ├─ 연동 대상 리소스
│   │   ├─ 헤더: 총 수 + 연결현황 뱃지 + [대상 수정] 버튼
│   │   └─ 타입별 그룹 테이블 (5개 초과 시 더보기)
│   │
│   └─ ▶ 비연동 리소스 (N) ← 접이식
│       └─ 타입별 그룹 테이블 (dimmed)
│
├─ RejectionAlert
└─ ActionButtons
```

## 5. 컴포넌트별 상세 설계

### 5.1 스캔 접이식 패널

#### 접힘 상태 (Summary) — 두 가지 모드

**평상시 (IDLE / COMPLETED):**
```
▶ 리소스 스캔  [완료]  12개 발견 · 신규 3 | 마지막: 2026-02-05 14:22    [스캔 시작]
```
- 배경: `bg2` (neutral)
- 왼쪽: 화살표 + 제목 + 상태뱃지 + 핵심 숫자 + 마지막 스캔 시점
- 오른쪽: 스캔 시작 버튼

**스캔 중 (IN_PROGRESS):**
```
▶ 리소스 스캔  [스캔 중...]                   리소스를 검색하고 있습니다
━━━━━━━━━━━━━━━━━━━━━━━━━▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░
```
- 배경: `warningBg` (주목 유도)
- 진행 바 인라인 표시
- 스캔 버튼 숨김 (이미 진행 중)

#### 펼침 상태 (Detail)
- 결과 메트릭: 발견/신규/업데이트/제거 4칸 그리드
- 타입별 분포: 가로 칩 나열
- 스캔 이력: 테이블 (일시, 상태, 소요, 결과)

### 5.2 연동 대상 리소스 테이블

#### 헤더 바
```
연동 대상  [8]  [연결 7] [끊김 1]                    [대상 수정]
```
- 총 수 뱃지
- 연결 현황 미니 뱃지 (연결=green, 끊김=red, 대기=gray)
- 리소스 검색: **제외** (불필요)

#### 기본 모드 (모니터링)
- 체크박스 없음
- 타입별 그룹 헤더 (아이콘 + 라벨 + 개수, 컬러 left-border)
- 컬럼: 리소스 ID, DB 타입, 리전, 연결 상태, Credential

#### 편집 모드 ("대상 수정" 클릭 시)
- 체크박스 컬럼 추가
- 기존 연동 대상은 체크된 상태로 표시

#### 타입별 접기 (5개 초과)
- 기본: 상위 5개만 표시
- `+N개 더보기` 버튼으로 전체 확장
- 펼친 후 `접기` 버튼

### 5.3 Credential 표시

| 상태 | 표시 | 스타일 |
|------|------|--------|
| Credential 불필요 (DynamoDB, Athena) | `불필요` | fg4, 12px |
| Credential 필요 + 선택됨 | Credential 이름 | fg1 |
| Credential 필요 + 미선택 | `미선택` | error 색상, fontWeight 500 |

### 5.4 비연동 리소스

```
▶ 비연동 리소스 (4)
```
- 접이식, 기본 접힘
- 펼치면 동일한 타입별 그룹 테이블 (opacity: 0.6)
- 편집 모드에서 체크박스로 연동 대상 추가 가능

## 6. 디자인 토큰 (Fluent 2 기반)

```
Color Tokens:
  brand:     #0078D4 (CTA, 링크, 활성 상태)
  success:   #107C10 / successBg: #DFF6DD (연결됨)
  error:     #BC2F32 / errorBg: #FDE7E9 (끊김, 미선택)
  warning:   #797600 / warningBg: #FFF4CE (스캔 중)
  fg1-fg4:   #242424 → #707070 (텍스트 계층)
  bg1-bg5:   #ffffff → #ebebeb (배경 계층)
  stroke1-3: #d1d1d1 → #f0f0f0 (테두리)

Typography:
  fontBase: Segoe UI, -apple-system, BlinkMacSystemFont
  fontMono: Consolas, Courier New

Radius:  2/4/6/8px
Spacing: 4/8/12/16/20/24px
```

## 7. 인터랙션 상세

| 액션 | 결과 |
|------|------|
| 스캔 Summary 클릭 | 스캔 상세 패널 토글 (접기/펼치기) |
| 스캔 시작 버튼 클릭 | 스캔 시작 → Summary가 IN_PROGRESS 모드로 전환, 패널 자동 펼침 |
| 대상 수정 클릭 | 편집 모드 진입 → 체크박스 노출 |
| 수정 완료 클릭 | 편집 모드 해제 → 체크박스 숨김 |
| 비연동 리소스 클릭 | 비연동 리소스 목록 토글 |
| 타입별 더보기 클릭 | 해당 타입의 나머지 리소스 표시 |

## 8. 목업 위치

- 인덱스: `/mockups/resource-scan`
- 시안 A (적용): `/mockups/resource-scan/a`
- 데이터: `app/mockups/resource-scan/_data.ts`
